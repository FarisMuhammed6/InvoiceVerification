@{
    ViewBag.Title = "Upload Contract";
}

<h2 class="text-center">Upload Contract</h2>

@using (Html.BeginForm("UploadContract", "Contract", FormMethod.Post, new { enctype = "multipart/form-data", @class = "needs-validation", novalidate = "novalidate" }))
{
    <div class="mb-3">
        <label for="contractName" class="form-label">Contract Name</label>
        <input type="text" class="form-control" id="contractName" name="contractName" required>
        <div class="invalid-feedback">
            Please enter a contract name.
        </div>
    </div>
    <div class="mb-3">
        <label for="contractFile" class="form-label">Contract Image</label>
        <div class="custom-file">
            <input type="file" class="custom-file-input" id="contractFile" name="file" required>
            <label class="custom-file-label" for="contractFile">Choose file</label>
            <div class="invalid-feedback">
                Please upload a contract image.
            </div>
        </div>
    </div>
    <button type="submit" class="btn btn-primary w-100">Upload <i class="fas fa-upload"></i></button>
}

@if (!string.IsNullOrEmpty(ViewBag.Message))
{
    <div class="alert alert-success mt-3">@ViewBag.Message</div>
}

<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="successModalLabel">Success</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Contract uploaded successfully.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
<script>
    (function () {
        'use strict';

        window.addEventListener('load', function () {
            var forms = document.getElementsByClassName('needs-validation');

            Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>
